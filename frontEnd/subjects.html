<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORT_Arena - Subjects</title>
    <link rel="stylesheet" href="src/css/subject.css">
</head>
<body>
      <header class="header">
            <nav class="nav">
                  <div class="logo">ORT_Arena</div>
                  <ul class="nav-links">
                  <li><a href="/">Home Page</a></li>
                  <li><a href="/problems">Problems</a></li>
                  <li><a href="#" class="active">Subjects</a></li>
                  <li><a href="/contests">Contests</a></li>
                  <li><a href="/leaderboard">Leaderboard</a></li>
                  </ul>
            </nav>
      </header>

      <div class="container">
            <div class="page-header">
                  <h1>–ü—Ä–µ–¥–º–µ—Ç—ã</h1>
                  <p>–í—ã–±–µ—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</p>
            </div>

            <div class="search-bar">
                  <span class="search-icon">üîç</span>
                  <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø—Ä–µ–¥–º–µ—Ç–∞...">
            </div>

            <div class="filter-buttons">
                  <button class="filter-btn active" data-filter="all">–í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã</button>
                  <button class="filter-btn" data-filter="science">–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—É–∫–∏</button>
                  <button class="filter-btn" data-filter="math">–¢–æ—á–Ω—ã–µ –Ω–∞—É–∫–∏</button>
                  <button class="filter-btn" data-filter="humanities">–ì—É–º–∞–Ω–∏—Ç–∞—Ä–Ω—ã–µ</button>
            </div>

            <div class="subjects-grid" id="subjects-container">
                  <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤...</div>
            </div>
      </div>

      <script>
            const subjectIcons = {
                  '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞': 'üìê',
                  '–§–∏–∑–∏–∫–∞': '‚öõÔ∏è',
                  '–•–∏–º–∏—è': 'üß™',
                  '–ë–∏–æ–ª–æ–≥–∏—è': 'üß¨',
                  '–ò—Å—Ç–æ—Ä–∏—è': 'üìú',
                  '–ì–µ–æ–≥—Ä–∞—Ñ–∏—è': 'üåç',
                  '–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞': 'üìñ',
                  '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π': 'üá¨üáß',
                  '–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞': 'üíª',
                  '–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ': 'üë•'
            };

            // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ—Ç–æ–º –∑–∞–º–µ–Ω–∏–º –Ω–∞ API)
            const tempSubjects = [
                  {
                  id: 1,
                  subject_name: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
                  description: '–ê–ª–≥–µ–±—Ä–∞, –≥–µ–æ–º–µ—Ç—Ä–∏—è, —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è –∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑',
                  topics_count: 45,
                  exercises_count: 320,
                  category: 'math'
                  },
                  {
                  id: 2,
                  subject_name: '–§–∏–∑–∏–∫–∞',
                  description: '–ú–µ—Ö–∞–Ω–∏–∫–∞, —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ, –æ–ø—Ç–∏–∫–∞ –∏ –∫–≤–∞–Ω—Ç–æ–≤–∞—è —Ñ–∏–∑–∏–∫–∞',
                  topics_count: 38,
                  exercises_count: 285,
                  category: 'science'
                  },
                  {
                  id: 3,
                  subject_name: '–•–∏–º–∏—è',
                  description: '–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∞—è –∏ –Ω–µ–æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∞—è —Ö–∏–º–∏—è, —Ö–∏–º–∏—á–µ—Å–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏',
                  topics_count: 32,
                  exercises_count: 245,
                  category: 'science'
                  },
                  {
                  id: 4,
                  subject_name: '–ë–∏–æ–ª–æ–≥–∏—è',
                  description: '–ë–æ—Ç–∞–Ω–∏–∫–∞, –∑–æ–æ–ª–æ–≥–∏—è, –∞–Ω–∞—Ç–æ–º–∏—è –∏ –≥–µ–Ω–µ—Ç–∏–∫–∞',
                  topics_count: 40,
                  exercises_count: 298,
                  category: 'science'
                  },
                  {
                  id: 5,
                  subject_name: '–ò—Å—Ç–æ—Ä–∏—è',
                  description: '–ò—Å—Ç–æ—Ä–∏—è –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω–∞ –∏ –≤—Å–µ–º–∏—Ä–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è',
                  topics_count: 35,
                  exercises_count: 267,
                  category: 'humanities'
                  },
                  {
                  id: 6,
                  subject_name: '–ì–µ–æ–≥—Ä–∞—Ñ–∏—è',
                  description: '–§–∏–∑–∏—á–µ—Å–∫–∞—è –∏ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—è –º–∏—Ä–∞',
                  topics_count: 28,
                  exercises_count: 198,
                  category: 'humanities'
                  }
            ];

            function getSubjectIcon(subjectName) {
                  return subjectIcons[subjectName] || 'üìö';
            }

            function renderSubjects(subjects) {
                  const container = document.getElementById('subjects-container');
                  
                  if (subjects.length === 0) {
                  container.innerHTML = '<div class="loading">–ü—Ä–µ–¥–º–µ—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                  return;
                  }

                  container.innerHTML = subjects.map(subject => `
                  <div class="subject-card" data-category="${subject.category}" onclick="openSubject(${subject.id})">
                        <div class="subject-icon">${getSubjectIcon(subject.subject_name)}</div>
                        <div class="subject-title">${subject.subject_name}</div>
                        <div class="subject-description">${subject.description}</div>
                        <div class="subject-stats">
                              <div class="stat-item">
                              <span class="stat-icon">üìù</span>
                              <span>${subject.topics_count} —Ç–µ–º</span>
                              </div>
                              <div class="stat-item">
                              <span class="stat-icon">üéØ</span>
                              <span>${subject.exercises_count} –∑–∞–¥–∞—á</span>
                              </div>
                        </div>
                  </div>
                  `).join('');
            }

            function openSubject(subjectId) {
                  // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–µ–º –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É
                  window.location.href = `/subjects/${subjectId}/topics`;
            }

            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
            document.querySelectorAll('.filter-btn').forEach(btn => {
                  btn.addEventListener('click', function() {
                  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                  this.classList.add('active');
                  
                  const filter = this.dataset.filter;
                  const cards = document.querySelectorAll('.subject-card');
                  
                  cards.forEach(card => {
                        if (filter === 'all' || card.dataset.category === filter) {
                              card.style.display = 'block';
                        } else {
                              card.style.display = 'none';
                        }
                  });
                  });
            });

            // –ü–æ–∏—Å–∫
            document.getElementById('search-input').addEventListener('input', function(e) {
                  const searchTerm = e.target.value.toLowerCase();
                  const cards = document.querySelectorAll('.subject-card');
                  
                  cards.forEach(card => {
                  const title = card.querySelector('.subject-title').textContent.toLowerCase();
                  const description = card.querySelector('.subject-description').textContent.toLowerCase();
                  
                  if (title.includes(searchTerm) || description.includes(searchTerm)) {
                        card.style.display = 'block';
                  } else {
                        card.style.display = 'none';
                  }
                  });
            });

            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
            async function loadSubjects() {
                  // –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                  // –ü–æ–∑–∂–µ –∑–∞–º–µ–Ω–∏–º –Ω–∞: const response = await fetch('/api/subjects/');
                  setTimeout(() => {
                  renderSubjects(tempSubjects);
                  }, 500);
            }

            loadSubjects();
      </script>
</body>
</html>