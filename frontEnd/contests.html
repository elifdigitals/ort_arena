<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORT_Arena - Contests</title>
    <link rel="stylesheet" href="src/css/contests.css">
</head>
<body>
      <header class="header">
            <nav class="nav">
                  <div class="logo">ORT_Arena</div>
                  <ul class="nav-links">
                  <li><a href="home_page.html">Home Page</a></li>
                  <li><a href="/problems">Problems</a></li>
                  <li><a href="subjects.html">Subjects</a></li>
                  <li><a href="#" class="active">Contests</a></li>
                  <li><a href="/leaderboard">Leaderboard</a></li>
                  </ul>
            </nav>
      </header>

      <div class="container">
            <div class="page-header">
                  <h1>–ö–æ–Ω—Ç–µ—Å—Ç—ã</h1>
                  <p>–£—á–∞—Å—Ç–≤—É–π –≤ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è—Ö –∏ –ø–æ–≤—ã—à–∞–π —Å–≤–æ–π —Ä–µ–π—Ç–∏–Ω–≥</p>
            </div>

            <div class="tabs">
                  <button class="tab-btn active" data-tab="upcoming">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ</button>
                  <button class="tab-btn" data-tab="active">–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ–π—á–∞—Å</button>
                  <button class="tab-btn" data-tab="finished">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</button>
                  <button class="tab-btn" data-tab="my">–ú–æ–∏ –∫–æ–Ω—Ç–µ—Å—Ç—ã</button>
            </div>

            <!-- –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –∫–æ–Ω—Ç–µ—Å—Ç—ã -->
            <div id="upcoming" class="contests-section active">
                  <div id="upcoming-contests"></div>
            </div>

            <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ—Å—Ç—ã -->
            <div id="active" class="contests-section">
                  <div id="active-contests"></div>
            </div>

            <!-- –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ—Å—Ç—ã -->
            <div id="finished" class="contests-section">
                  <div id="finished-contests"></div>
            </div>

            <!-- –ú–æ–∏ –∫–æ–Ω—Ç–µ—Å—Ç—ã -->
            <div id="my" class="contests-section">
                  <div id="my-contests"></div>
            </div>
      </div>

      <script>
            // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ–∑–∂–µ –∑–∞–º–µ–Ω–∏–º –Ω–∞ API)
            const tempContests = {
                  upcoming: [
                  {
                        id: 1,
                        name: '–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –û–†–¢ –ú–∞—Ä–∞—Ñ–æ–Ω',
                        subject: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
                        type: 'official',
                        start_time: '2024-12-05T10:00:00',
                        duration: 180,
                        description: '–ú–∞—Å—à—Ç–∞–±–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ. –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è!',
                        participants_count: 245,
                        exercises_count: 30
                  },
                  {
                        id: 2,
                        name: '–¢—É—Ä–Ω–∏—Ä –ø–æ —Ñ–∏–∑–∏–∫–µ',
                        subject: '–§–∏–∑–∏–∫–∞',
                        type: 'training',
                        start_time: '2024-12-06T15:00:00',
                        duration: 120,
                        description: '–ú–µ—Ö–∞–Ω–∏–∫–∞ –∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ. –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ—Å—Ç –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏.',
                        participants_count: 189,
                        exercises_count: 25
                  },
                  {
                        id: 3,
                        name: '–•–∏–º–∏—á–µ—Å–∫–∞—è –±–∏—Ç–≤–∞',
                        subject: '–•–∏–º–∏—è',
                        type: 'official',
                        start_time: '2024-12-07T12:00:00',
                        duration: 150,
                        description: '–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∞—è –∏ –Ω–µ–æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∞—è —Ö–∏–º–∏—è. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∑–∞—á–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ—Å—Ç.',
                        participants_count: 167,
                        exercises_count: 28
                  }
                  ],
                  active: [
                  {
                        id: 4,
                        name: '–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç: –ë–∏–æ–ª–æ–≥–∏—è',
                        subject: '–ë–∏–æ–ª–æ–≥–∏—è',
                        type: 'training',
                        start_time: '2024-12-04T14:00:00',
                        end_time: '2024-12-04T15:30:00',
                        duration: 90,
                        description: '–ë–æ—Ç–∞–Ω–∏–∫–∞ –∏ –∑–æ–æ–ª–æ–≥–∏—è. –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π —Å–ø—Ä–∏–Ω—Ç!',
                        participants_count: 87,
                        exercises_count: 20
                  }
                  ],
                  finished: [
                  {
                        id: 5,
                        name: '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç—É—Ä–Ω–∏—Ä',
                        subject: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
                        type: 'official',
                        start_time: '2024-11-28T10:00:00',
                        duration: 180,
                        description: '–°–ª–æ–∂–Ω—ã–π –∫–æ–Ω—Ç–µ—Å—Ç —Å –∑–∞–¥–∞—á–∞–º–∏ –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.',
                        participants_count: 312,
                        exercises_count: 35,
                        your_rank: 42,
                        your_score: 2450
                  },
                  {
                        id: 6,
                        name: '–ò—Å—Ç–æ—Ä–∏—è –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω–∞',
                        subject: '–ò—Å—Ç–æ—Ä–∏—è',
                        type: 'training',
                        start_time: '2024-11-25T16:00:00',
                        duration: 120,
                        description: '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã.',
                        participants_count: 198,
                        exercises_count: 40,
                        your_rank: 15,
                        your_score: 3200
                  }
                  ]
            };

            function formatDate(dateString) {
                  const date = new Date(dateString);
                  const months = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è', 
                              '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];
                  const day = date.getDate();
                  const month = months[date.getMonth()];
                  const hours = date.getHours().toString().padStart(2, '0');
                  const minutes = date.getMinutes().toString().padStart(2, '0');
                  return `${day} ${month}, ${hours}:${minutes}`;
            }

            function formatDuration(minutes) {
                  const hours = Math.floor(minutes / 60);
                  const mins = minutes % 60;
                  return hours > 0 ? `${hours}—á ${mins}–º–∏–Ω` : `${mins} –º–∏–Ω—É—Ç`;
            }

            function renderContest(contest, status) {
                  let statusBadge = '';
                  let actionButtons = '';

                  if (status === 'upcoming') {
                  statusBadge = `
                        <div class="status-info">
                              <div class="status-dot status-upcoming"></div>
                              <span class="status-text">–ù–∞—á–Ω–µ—Ç—Å—è ${formatDate(contest.start_time)}</span>
                        </div>
                  `;
                  actionButtons = `
                        <button class="btn btn-primary" onclick="registerContest(${contest.id})">
                              –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                        </button>
                        <button class="btn btn-secondary" onclick="viewDetails(${contest.id})">
                              –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                        </button>
                  `;
                  } else if (status === 'active') {
                  statusBadge = `
                        <div class="status-info">
                              <div class="status-dot status-active"></div>
                              <span class="status-text">üî¥ –í –≠–§–ò–†–ï</span>
                        </div>
                  `;
                  actionButtons = `
                        <button class="btn btn-primary" onclick="joinContest(${contest.id})">
                              –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ—Å—Ç
                        </button>
                  `;
                  } else if (status === 'finished') {
                  statusBadge = `
                        <div class="status-info">
                              <div class="status-dot status-finished"></div>
                              <span class="status-text">–ó–∞–≤–µ—Ä—à–µ–Ω</span>
                        </div>
                  `;
                  actionButtons = `
                        <button class="btn btn-secondary" onclick="viewResults(${contest.id})">
                              –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
                        </button>
                        ${contest.your_rank ? `
                              <button class="btn btn-primary" onclick="viewSolutions(${contest.id})">
                              –ú–æ–∏ —Ä–µ—à–µ–Ω–∏—è
                              </button>
                        ` : ''}
                  `;
                  }

            return `
                  <div class="contest-card">
                        <div class="contest-type-badge ${contest.type === 'official' ? 'badge-official' : 'badge-training'}">
                              ${contest.type === 'official' ? '‚≠ê –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π' : 'üìù –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞'}
                        </div>

                        <div class="contest-header">
                              <div class="contest-icon">üèÜ</div>
                              <div class="contest-info">
                              <div class="contest-title">${contest.name}</div>
                              <div class="contest-subject">üìö ${contest.subject}</div>
                              <div class="contest-description">${contest.description}</div>
                              </div>
                        </div>

                        <div class="contest-meta">
                              <div class="meta-item">
                              <div class="meta-icon">‚è∞</div>
                              <div class="meta-content">
                                    <span class="meta-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</span>
                                    <span class="meta-value">${formatDuration(contest.duration)}</span>
                              </div>
                              </div>
                              <div class="meta-item">
                              <div class="meta-icon">üìù</div>
                              <div class="meta-content">
                                    <span class="meta-label">–ó–∞–¥–∞—á</span>
                                    <span class="meta-value">${contest.exercises_count}</span>
                              </div>
                              </div>
                              <div class="meta-item">
                              <div class="meta-icon">üë•</div>
                              <div class="meta-content">
                                    <span class="meta-label">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</span>
                                    <span class="meta-value">${contest.participants_count}</span>
                              </div>
                              </div>
                              ${contest.your_rank ? `
                              <div class="meta-item">
                                    <div class="meta-icon">üèÖ</div>
                                    <div class="meta-content">
                                          <span class="meta-label">–í–∞—à–µ –º–µ—Å—Ç–æ</span>
                                          <span class="meta-value">#${contest.your_rank}</span>
                                    </div>
                              </div>
                              ` : ''}
                        </div>

                        <div class="contest-status">
                              ${statusBadge}
                              <div class="contest-actions">
                              ${actionButtons}
                              </div>
                        </div>
                  </div>
                  `;
            }

            function renderContests(status) {
                  const container = document.getElementById(`${status}-contests`);
                  const contests = tempContests[status];

                  if (!contests || contests.length === 0) {
                  container.innerHTML = `
                        <div class="empty-state">
                              <div class="empty-state-icon">üì≠</div>
                              <h3>–ö–æ–Ω—Ç–µ—Å—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                              <p>–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –∫–æ–Ω—Ç–µ—Å—Ç–æ–≤</p>
                        </div>
                  `;
                  return;
                  }

            container.innerHTML = contests.map(contest => renderContest(contest, status)).join('');
            }

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab-btn').forEach(btn => {
                  btn.addEventListener('click', function() {
                  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                  document.querySelectorAll('.contests-section').forEach(s => s.classList.remove('active'));
                  
                  this.classList.add('active');
                  const tab = this.dataset.tab;
                  document.getElementById(tab).classList.add('active');
                  });
            });

            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π
            function registerContest(id) {
                  alert(`–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∫–æ–Ω—Ç–µ—Å—Ç #${id}`);
                  // –ó–¥–µ—Å—å –±—É–¥–µ—Ç API –∑–∞–ø—Ä–æ—Å
            }

            function joinContest(id) {
                  window.location.href = `/contests/${id}/participate`;
            }

            function viewDetails(id) {
                  window.location.href = `/contests/${id}`;
            }

            function viewResults(id) {
                  window.location.href = `/contests/${id}/results`;
            }

            function viewSolutions(id) {
                  window.location.href = `/contests/${id}/my-solutions`;
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            renderContests('upcoming');
            renderContests('active');
            renderContests('finished');
            renderContests('my');
      </script>
</body>
</html>